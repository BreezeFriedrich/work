<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yishu.dao.WechatDao">

    <select id="findUserByopenid" resultType="User">
        SELECT `user_id`,`openid`,`createtime`,`nickname`,`IMGURL`.`untime`
        FROM h_user
        WHERE `openid`=#{openid}
    </select>

    <insert id="addSubscribe" parameterType="User" useGeneratedKeys="true" keyProperty="user_id">
        INSERT INTO h_user(`openid`,`createtime`,`nickname`,`IMGURL`)
          VALUES (#{openid},#{createtime},#{nickname},#{imgurl});
    </insert>

    <update id="UnSubscribe" parameterType="User">
        UPDATE h_user
          SET untime=#{untime}
        WHERE openid=#{openid};
    </update>

    <update id="UnSubscribe2" parameterType="User">
        UPDATE h_user
          SET IMGURL=#{imgurl},nickname=#{nickname}
        WHERE openid=#{openid};
    </update>
</mapper>